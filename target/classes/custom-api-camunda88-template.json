{
  "$schema": "https://unpkg.com/@camunda/zeebe-element-templates-json-schema/resources/schema.json",
  "name": "CRUD API Connector",
  "id": "io.camunda.crud-api:1",
  "description": "High-performance custom REST API connector for CRUD operations with JSON payload and headers. Supports GET, POST, PUT, PATCH, DELETE methods with HTTP/2 and connection pooling.",
  "appliesTo": [
    "bpmn:ServiceTask"
  ],
  "icon": {
    "contents": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='9' fill='%232196F3'/%3E%3Ctext x='11' y='14' fill='white' style='font-family: Arial; font-size: 10px; font-weight: bold; text-anchor: middle;'%3EAPI%3C/text%3E%3C/svg%3E"
  },
  "properties": [
    {
      "label": "Task Definition Type",
      "type": "Hidden",
      "value": "io.camunda:crud-api:1",
      "binding": {
        "type": "zeebe:taskDefinition",
        "property": "type"
      }
    },
    {
      "id": "method",
      "label": "HTTP Method",
      "description": "The HTTP method to use for the API call",
      "type": "Dropdown",
      "value": "GET",
      "choices": [
        { "name": "GET", "value": "GET" },
        { "name": "POST", "value": "POST" },
        { "name": "PUT", "value": "PUT" },
        { "name": "PATCH", "value": "PATCH" },
        { "name": "DELETE", "value": "DELETE" },
        { "name": "HEAD", "value": "HEAD" }
      ],
      "binding": {
        "type": "zeebe:input",
        "name": "method"
      }
    },
    {
      "id": "url",
      "label": "API URL",
      "description": "The REST API endpoint URL (must start with http:// or https://)",
      "type": "String",
      "binding": {
        "type": "zeebe:input",
        "name": "url"
      },
      "constraints": {
        "notEmpty": true,
        "pattern": {
          "value": "^https?://.*",
          "message": "URL must start with http:// or https://"
        }
      }
    },
    {
      "id": "payload",
      "label": "Request Payload (JSON)",
      "description": "JSON payload to send in the request body (for POST, PUT, PATCH methods)",
      "type": "Text",
      "value": "{}",
      "optional": true,
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "payload"
      },
      "condition": {
        "property": "method",
        "oneOf": ["POST", "PUT", "PATCH", "DELETE"]
      }
    },
    {
      "id": "headers",
      "label": "HTTP Headers (JSON)",
      "description": "Custom HTTP headers as JSON object (e.g., {\"Authorization\":\"Bearer token\",\"X-Custom-Header\":\"value\"})",
      "type": "Text",
      "value": "{}",
      "optional": true,
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "headers"
      }
    },
    {
      "id": "retries",
      "label": "Number of Retries",
      "description": "Number of retries on failure",
      "type": "String",
      "value": "3",
      "optional": true,
      "binding": {
        "type": "zeebe:taskHeader",
        "key": "retries"
      }
    },
    {
      "label": "Response Output",
      "type": "Hidden",
      "value": "result",
      "binding": {
        "type": "zeebe:output",
        "source": "= result"
      }
    }
  ],
  "groups": [
    {
      "id": "connection",
      "label": "Connection"
    },
    {
      "id": "request",
      "label": "Request Configuration"
    },
    {
      "id": "response",
      "label": "Response Handling"
    }
  ]
}
